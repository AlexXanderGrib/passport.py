from shutil import get_terminal_size

from colorama import Fore, init

from passport import *

SIZE = get_terminal_size((80, 20))
init()

banner = """ 
â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ                                                          â–ˆâ–ˆâ–ˆâ–ˆâ–ˆ                           
â–‘â–‘â–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–ˆâ–ˆâ–ˆ                                                        â–‘â–‘â–ˆâ–ˆâ–ˆ                            
 â–‘â–ˆâ–ˆâ–ˆ    â–‘â–ˆâ–ˆâ–ˆ  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ    â–ˆâ–ˆâ–ˆâ–ˆâ–ˆ   â–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ   â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ      â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆ â–ˆâ–ˆâ–ˆâ–ˆ
 â–‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  â–‘â–‘â–‘â–‘â–‘â–ˆâ–ˆâ–ˆ  â–ˆâ–ˆâ–ˆâ–‘â–‘   â–ˆâ–ˆâ–ˆâ–‘â–‘  â–‘â–‘â–ˆâ–ˆâ–ˆâ–‘â–‘â–ˆâ–ˆâ–ˆ â–ˆâ–ˆâ–ˆâ–‘â–‘â–ˆâ–ˆâ–ˆâ–‘â–‘â–ˆâ–ˆâ–ˆâ–‘â–‘â–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–ˆâ–ˆâ–ˆâ–‘      â–‘â–‘â–ˆâ–ˆâ–ˆâ–‘â–‘â–ˆâ–ˆâ–ˆâ–‘â–‘â–ˆâ–ˆâ–ˆ â–‘â–ˆâ–ˆâ–ˆ 
 â–‘â–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘    â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ â–‘â–‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆ â–‘â–‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  â–‘â–ˆâ–ˆâ–ˆ â–‘â–ˆâ–ˆâ–ˆâ–‘â–ˆâ–ˆâ–ˆ â–‘â–ˆâ–ˆâ–ˆ â–‘â–ˆâ–ˆâ–ˆ â–‘â–‘â–‘   â–‘â–ˆâ–ˆâ–ˆ        â–‘â–ˆâ–ˆâ–ˆ â–‘â–ˆâ–ˆâ–ˆ â–‘â–ˆâ–ˆâ–ˆ â–‘â–ˆâ–ˆâ–ˆ 
 â–‘â–ˆâ–ˆâ–ˆ         â–ˆâ–ˆâ–ˆâ–‘â–‘â–ˆâ–ˆâ–ˆ  â–‘â–‘â–‘â–‘â–ˆâ–ˆâ–ˆ â–‘â–‘â–‘â–‘â–ˆâ–ˆâ–ˆ â–‘â–ˆâ–ˆâ–ˆ â–‘â–ˆâ–ˆâ–ˆâ–‘â–ˆâ–ˆâ–ˆ â–‘â–ˆâ–ˆâ–ˆ â–‘â–ˆâ–ˆâ–ˆ       â–‘â–ˆâ–ˆâ–ˆ â–ˆâ–ˆâ–ˆ    â–‘â–ˆâ–ˆâ–ˆ â–‘â–ˆâ–ˆâ–ˆ â–‘â–ˆâ–ˆâ–ˆ â–‘â–ˆâ–ˆâ–ˆ 
 â–ˆâ–ˆâ–ˆâ–ˆâ–ˆ       â–‘â–‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  â–‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ â–‘â–‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  â–ˆâ–ˆâ–ˆâ–ˆâ–ˆ      â–‘â–‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  â–ˆâ–ˆ â–‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  â–‘â–‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 
â–‘â–‘â–‘â–‘â–‘         â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ â–‘â–‘â–‘â–‘â–‘â–‘  â–‘â–‘â–‘â–‘â–‘â–‘   â–‘â–ˆâ–ˆâ–ˆâ–‘â–‘â–‘   â–‘â–‘â–‘â–‘â–‘â–‘  â–‘â–‘â–‘â–‘â–‘        â–‘â–‘â–‘â–‘â–‘  â–‘â–‘  â–‘â–ˆâ–ˆâ–ˆâ–‘â–‘â–‘    â–‘â–‘â–‘â–‘â–‘â–ˆâ–ˆâ–ˆ 
                                        â–‘â–ˆâ–ˆâ–ˆ                                      â–‘â–ˆâ–ˆâ–ˆ       â–ˆâ–ˆâ–ˆ â–‘â–ˆâ–ˆâ–ˆ 
                                        â–ˆâ–ˆâ–ˆâ–ˆâ–ˆ                                     â–ˆâ–ˆâ–ˆâ–ˆâ–ˆ     â–‘â–‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ  
                                       â–‘â–‘â–‘â–‘â–‘                                     â–‘â–‘â–‘â–‘â–‘       â–‘â–‘â–‘â–‘â–‘â–‘   """

banner_width = len(banner.split('\n')[2])

if banner_width < SIZE.columns:
    print(f'{Fore.YELLOW}{banner}')
else:
    print(f'{Fore.YELLOW} [Passport.py]')

print('\n\n')

fio = input(f'{Fore.CYAN}ðŸ˜Š Ð¤Ð˜Ðž: {Fore.RED}')
birth_date = input(
    f'{Fore.CYAN}â° Ð”Ð°Ñ‚Ð° Ð Ð¾Ð¶Ð´ÐµÐ½Ð¸Ñ (Ð² Ñ„Ð¾Ñ€Ð¼Ð°Ñ‚Ðµ DD.MM.YYYY): {Fore.RED}')
passport = input(
    f'{Fore.CYAN}ðŸ” Ð¡ÐµÑ€Ð¸Ñ Ð¸ Ð½Ð¾Ð¼ÐµÑ€ Ð¿Ð°ÑÐ¿Ð¾Ñ€Ñ‚Ð° (Ð² Ñ„Ð¾Ñ€Ð¼Ð°Ñ‚Ðµ Ð¡Ð¡Ð¡Ð¡ ÐÐÐÐÐÐ): {Fore.RED}')

print('')
print(f'{Fore.RED} Ð’Ð¾Ñ‚ Ñ‡Ñ‚Ð¾ ÑƒÐ´Ð°Ð»Ð¾ÑÑŒ Ð½Ð°Ð¹Ñ‚Ð¸:')

serial = passport[0:4]

print('=' * int(SIZE.columns * 0.5))

print(f'{Fore.YELLOW}ðŸ—ºï¸ Ð ÐµÐ³Ð¸Ð¾Ð½ Ð²Ñ‹Ð´Ð°Ñ‡Ð¸: {Fore.RED}{get_region(serial)}')
print(f'{Fore.YELLOW}ðŸ•°ï¸ ÐŸÑ€Ð¸Ð¼ÐµÑ€Ð½Ð°Ñ Ð´Ð°Ñ‚Ð° Ð²Ñ‹Ð´Ð°Ñ‡Ð¸: {Fore.RED}{get_date_of_issue(serial, birth_date)}')

passport_for_inn = f'{passport[0:2]} {passport[2:4]} {passport[5:]}'


try:
    inn = get_inn(fio, birth_date, passport_for_inn)
    print(f'{Fore.YELLOW}ðŸ§¾ Ð˜ÐÐ: {Fore.RED}{inn}')
except Exception as e:
    inn = None
    print(f'{Fore.RED} ÐÐµ ÑƒÐ´Ð°Ð»Ð¾ÑÑŒ Ð¿Ð¾Ð»ÑƒÑ‡Ð¸Ñ‚ÑŒ Ð˜ÐÐ', e)

if inn:
    try:
        if is_self_employed(inn):
            print(f'{Fore.GREEN}ðŸ”¨ Ð¤Ð¸Ð·. Ð»Ð¸Ñ†Ð¾ Ð¸Ð¼ÐµÐµÑ‚ ÑÑ‚Ð°Ñ‚ÑƒÑ ÑÐ°Ð¼Ð¾Ð·Ð°Ð½ÑÑ‚Ð¾Ð³Ð¾')
    except Exception as e:
        print(f'{Fore.RED} ÐÐµ ÑƒÐ´Ð°Ð»Ð¾ÑÑŒ ÑÑ‚Ð°Ñ‚ÑƒÑ ÑÐ°Ð¼Ð¾Ð·Ð°Ð½ÑÑ‚Ð¾ÑÑ‚Ð¸', e)
